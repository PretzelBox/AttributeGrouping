$.fn.groupAttributes=function(){return this.each(function(){var e=$(this);if(!e.hasClass("AttributeNavigationLinks"))throw new TypeError("This method is only valid on Browse By Attribute type widgets!");var t=e.children("ul").first(),n=t.data("header-class"),r=t.data("footer-class"),i=$("<div></div>").addClass("attribute-group"),s=$("<ul></ul>").addClass(t.attr("class")).addClass("attribute-group-list"),o=$("<div></div>").addClass(n),u=$("<div></div>").addClass(r);e.find("li").each(function(){var t=$(this);if(t.hasClass(n)){var a=i.clone(),f=s.clone(),l=t.text();a.attr("data-group-name",l);a.addClass("group-"+l.replace(/ /g,"-").toLowerCase());a.append(o.clone().append(t.find(".ControlHeader")));a.append(f);e.append(a)}else if(t.hasClass(r))e.find(".attribute-group").last().append(u.clone().append(t.children()));else e.find(".attribute-group").last().find(".attribute-group-list").append(t)});t.hide()})}
